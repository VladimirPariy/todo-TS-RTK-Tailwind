import React, {FC, useEffect, useRef} from 'react';import cl from "./UpdatingTitle.module.scss";import {AiOutlineCheck} from "react-icons/ai";import {IoMdTrash} from "react-icons/io";import {isUpdatingTodo, updatedTitleTodo} from "../../store/slice/todoSlice";import {isValidTodo} from "../../store/slice/validTodoSlice";import {useAppDispatch} from "../../hooks/useAppDispatch";import {useTheme} from "../../hooks/useTheme";interface UpdatingFormProps {  isUpdating: boolean;  id: string;  title: string;  taskValue: string;  setTaskValue: React.Dispatch<React.SetStateAction<string>>}const UpdatingTitle: FC<UpdatingFormProps> = (props) => {  const {isUpdating, id, title, taskValue, setTaskValue} = props  const dispatch = useAppDispatch()  const inputRef = useRef<HTMLInputElement>(null)  const changeUpdatingHandler = (e: React.ChangeEvent<HTMLInputElement>) => {    setTaskValue(e.target.value)  }  const saveUpdatingHandler = (): void => {    if (taskValue.trim().length > 0) {      dispatch(updatedTitleTodo({id, title: taskValue.trim()}))      return    }    setTaskValue('')    dispatch(isValidTodo(false))  }  const clearUpdatingHandler = (): void => {    dispatch(isUpdatingTodo(id))    setTaskValue(title)  }  const keyDownUpdateHandler: React.KeyboardEventHandler<HTMLInputElement> = (e): void => {    if (e.key === 'Enter') saveUpdatingHandler()    if (e.key === 'Escape') clearUpdatingHandler()  }  useEffect(() => {    if (isUpdating) {      const l = inputRef.current?.value.length || 0      inputRef.current?.setSelectionRange(l, l)      inputRef.current?.focus()    }  }, [isUpdating])  useEffect(() => {    if (inputRef && inputRef.current) {      inputRef.current.style.height = "0px";      const scrollHeight = inputRef.current.scrollHeight;      inputRef.current.style.height = scrollHeight + "px";    }  }, [isUpdating]);  const getTitleUpdatingClassName = useTheme('titleUpdating', cl)  return (    <div className={!isUpdating ? cl.none : getTitleUpdatingClassName}>      <input className={cl.updatingInput}             value={taskValue}             onChange={changeUpdatingHandler}             ref={inputRef}             onKeyDown={keyDownUpdateHandler}             onBlur={() => inputRef.current?.focus()}/>      <button onClick={saveUpdatingHandler}              className={cl.save}              children={<AiOutlineCheck/>}/>      <button onClick={clearUpdatingHandler}              className={cl.clear}              children={<IoMdTrash/>}/>    </div>  );};export default UpdatingTitle;