import React, {ChangeEvent, FC, KeyboardEventHandler, useEffect, useRef, useState} from 'react';import cl from "./UpdatingTitle.module.scss";import {AiOutlineCheck} from "react-icons/ai";import {IoMdTrash} from "react-icons/io";import {isUpdatingTodo, updatingTitleTodo} from "../../store/slice/todoSlice";import {isValidTodo} from "../../store/slice/validTodoSlice";import {useAppDispatch} from "../../hooks/useAppDispatch";import {useTheme} from "../../hooks/useTheme";interface UpdatingFormProps {  isUpdating: boolean;  id: string;  title: string;}const UpdatingTitle: FC<UpdatingFormProps> = ({isUpdating, id, title}) => {  const dispatch = useAppDispatch()  const getTitleUpdatingClassName = useTheme('titleUpdating', cl)  const inputRef = useRef<HTMLInputElement>(null)  const [taskValue, setTaskValue] = useState<string>(title)  const changeUpdatingHandler = (e: ChangeEvent<HTMLInputElement>) => {    setTaskValue(e.target.value)  }  const saveUpdatingHandler = (): void => {    if (taskValue.length > 0) {      dispatch(updatingTitleTodo({id, title: taskValue}))      return    }    dispatch(isValidTodo(false))  }  const clearUpdatingHandler = (): void => {    dispatch(isUpdatingTodo(id))    setTaskValue(title)  }  const keyDownUpdateHandler: KeyboardEventHandler<HTMLInputElement> = (e): void => {    if (e.key === 'Enter') saveUpdatingHandler()    if (e.key === 'Escape') clearUpdatingHandler()  }  useEffect(() => {    if (isUpdating && inputRef.current !== null) {      const l = inputRef.current.value.length      inputRef.current.setSelectionRange(l, l)      inputRef.current.focus()    }  }, [isUpdating])  return (    <div className={!isUpdating ? cl.none : getTitleUpdatingClassName}>      <input        className={cl.updatingTextArea}        value={taskValue}        onChange={changeUpdatingHandler}        ref={inputRef}        onKeyDown={keyDownUpdateHandler}/>      <button onClick={saveUpdatingHandler}              className={cl.save}              children={<AiOutlineCheck/>}/>      <button onClick={clearUpdatingHandler}              className={cl.clear}              children={<IoMdTrash/>}/>    </div>  );};export default UpdatingTitle;